{"version":3,"sources":["webpack:///./src/views/Profile/index.vue?a528","webpack:///./src/components/ImageInput/index.vue?ac62","webpack:///./src/helpers/AsyncFileReader.js","webpack:///src/components/ImageInput/index.vue","webpack:///./src/components/ImageInput/index.vue?a64c","webpack:///./src/components/ImageInput/index.vue","webpack:///src/views/Profile/index.vue","webpack:///./src/views/Profile/index.vue?9c7c","webpack:///./src/views/Profile/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","submit","$event","preventDefault","onSubmit","attrs","img-style","maxWidth","maxHeight","src","user","image","change","setImage","_v","type","name","domProps","value","email","phone","to","staticRenderFns","ImageInputvue_type_template_id_7a514650_render","_t","id","generatePreview","directives","rawName","expression","style","imgSrc","alt","ImageInputvue_type_template_id_7a514650_staticRenderFns","AsyncFileReader","Object","classCallCheck","reader","FileReader","file","format","_this","Promise","resolve","reject","methodName","onload","ev","target","result","e","readAs","ImageInputvue_type_script_lang_js_","props","required","String","default","imgStyle","data","imageFile","imagePreview","computed","methods","_generatePreview","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","files","AsyncFileReader_AsyncFileReader","readAsDataURL","sent","$data","$emit","t0","unknownError","stop","_x","apply","arguments","components_ImageInputvue_type_script_lang_js_","component","componentNormalizer","options","__file","ImageInput","Profilevue_type_script_lang_js_","components","PasswordField","mixins","withUser","errors","ErrorBag","watch","confirming","show","$","modal","mounted","notifications","showUpdateErrorNotification","title","$t","message","objectSpread","vuex_esm","verifyPassword","updateUser","_onSubmit","formData","matches","FormData","hasOwnProperty","abrupt","views_Profilevue_type_script_lang_js_","Profile_component","__webpack_exports__"],"mappings":"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","file":"js/profile.abff039b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',[_c('div',{staticClass:\"card shadow\"},[_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('image-input',{attrs:{\"img-style\":{maxWidth: '200px', maxHeight: '200px'},\"src\":_vm.user.image},on:{\"change\":_vm.setImage}},[_vm._v(\"\\n                            Imagem\\n                        \")])],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Nome\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"name\"},domProps:{\"value\":_vm.user.name}})])]),_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Email\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"email\"},domProps:{\"value\":_vm.user.email}})])])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Telefone\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"phone\"},domProps:{\"value\":_vm.user.phone || ''}})])]),_c('div',{staticClass:\"col-12 col-md-6\"},[_c('password-field')],1)]),_c('div',{staticClass:\"text-right\"},[_c('router-link',{staticClass:\"btn btn-danger mr-1\",attrs:{\"to\":\"/\"}},[_vm._v(\"Cancelar\")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Salvar\")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._t(\"default\")],2),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"file\",\"name\":_vm.name,\"id\":_vm.name},on:{\"change\":_vm.generatePreview}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.imgSrc),expression:\"imgSrc\"}],staticClass:\"m-2\"},[_c('img',{staticClass:\"img-response img-fluid img-thumbnail\",style:(_vm.imgStyle),attrs:{\"src\":_vm.imgSrc,\"alt\":(\"Preview \" + _vm.name)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class AsyncFileReader {\n  constructor() {\n    this.reader = new FileReader()\n  }\n\n  readAs(file, format) {\n    return new Promise((resolve, reject) => {\n      const methodName = `readAs${format}`\n\n      try {\n        this.reader.onload = ev => {\n          return resolve(ev.target.result)\n        }\n\n        this.reader[methodName](file)\n      } catch(e) {\n        return reject(e)\n      }\n    })\n  }\n\n  readAsDataURL(file) {\n    return this.readAs(file, 'DataURL')\n  }\n\n  readAsArrayBuffer(file) {\n    return this.readAs(file, 'ArrayBuffer')\n  }\n\n  readAsBinaryString(file) {\n    this.readAs(file, 'BinaryString')\n  }\n\n  readAsText(file) {\n    this.readAs('Text')\n  }\n}","<script>\n  import AsyncFileReader from \"../../helpers/AsyncFileReader\"\n\n  export default {\n    name: 'ImageInput',\n    props: {\n      src: {\n        required: true\n      },\n      name: {\n        type: String,\n        default: () => 'image'\n      },\n      imgStyle: {\n        type: Object,\n        default: () => ({})\n      }\n    },\n    data: () => ({imageFile: null, imagePreview: null}),\n    computed: {\n      imgSrc() {\n        if (this.imagePreview) return this.imagePreview\n        return this.src\n      }\n    },\n    methods: {\n      async generatePreview(ev) {\n        try {\n          const file = ev.target.files[0]\n          const reader = new AsyncFileReader()\n          const result = await reader.readAsDataURL(file)\n\n          this.$data.imageFile = file\n          this.$data.imagePreview = result\n\n          this.$emit('change', file)\n        } catch(e) {\n          unknownError()\n        }\n      }\n    }\n  }\n</script>\n\n<template>\n    <div>\n        <div class=\"form-group\">\n            <label>\n                <slot/>\n            </label>\n            <input\n                    @change=\"generatePreview\"\n                    type=\"file\"\n                    :name=\"name\"\n                    :id=\"name\"\n                    class=\"form-control\">\n        </div>\n        <div v-show=\"imgSrc\" class=\"m-2\">\n            <img\n                    class=\"img-response img-fluid img-thumbnail\"\n                    :style=\"imgStyle\"\n                    :src=\"imgSrc\"\n                    :alt=\"`Preview ${name}`\">\n        </div>\n    </div>\n</template>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7a514650&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","<script>\n  import withUser from '@/mixins/withUser'\n  import PasswordField from '@/components/UI/PasswordField'\n  import ErrorBag from \"../../helpers/ErrorBag\"\n  import {mapActions} from 'vuex'\n  import ImageInput from '@/components/ImageInput'\n\n  export default {\n    name: 'Profile',\n    components: {\n      PasswordField,\n      ImageInput\n    },\n    mixins: [withUser],\n    data: () => ({errors: new ErrorBag(), image: null}),\n    watch: {\n      confirming(show) {\n        $('#updateConfirm').modal({show})\n      }\n    },\n    mounted() {\n      $('#updateConfirm').on('hidden.bs.modal', () => this.$data.confirming = false)\n      $('#updateConfirm').on('shown.bs.modal', () => this.$data.confirming = true)\n    },\n    notifications: {\n      showUpdateErrorNotification: {\n        type: 'error',\n        title: $t('notifications.title.error'),\n        message: $t('notifications.message.user.update.error')\n      }\n    },\n    methods: {\n      ...mapActions({\n        verifyPassword: 'auth/verifyPassword',\n        updateUser: 'auth/updateUser'\n      }),\n      async onSubmit(ev) {\n        ev.preventDefault()\n\n        const formData = new FormData(ev.target)\n\n        const matches = await this.verifyPassword()\n\n        if (matches) {\n          const result = await this.updateUser(formData)\n\n          if (result.hasOwnProperty('errors')) {\n            this.$data.errors = new ErrorBag(result.errors)\n          }\n        }\n\n        return false\n      },\n      setImage(image) {\n        this.$data.image = image\n      }\n    }\n  }\n</script>\n\n<template>\n    <page>\n        <div class=\"card shadow\">\n            <div class=\"card-body\">\n                <form @submit.prevent=\"onSubmit\">\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <image-input\n                                    :img-style=\"{maxWidth: '200px', maxHeight: '200px'}\"\n                                    :src=\"user.image\"\n                                    @change=\"setImage\">\n                                Imagem\n                            </image-input>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Nome</label>\n                                <input type=\"text\"\n                                       name=\"name\"\n                                       :value=\"user.name\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Email</label>\n                                <input type=\"text\"\n                                       name=\"email\"\n                                       :value=\"user.email\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Telefone</label>\n                                <input type=\"text\"\n                                       name=\"phone\"\n                                       :value=\"user.phone || ''\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                        <div class=\"col-12 col-md-6\">\n                            <password-field/>\n                        </div>\n                    </div>\n                    <div class=\"text-right\">\n                        <router-link to=\"/\" class=\"btn btn-danger mr-1\">Cancelar</router-link>\n                        <button type=\"submit\" class=\"btn btn-primary\">Salvar</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </page>\n</template>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=73bf1c44&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports"],"sourceRoot":""}