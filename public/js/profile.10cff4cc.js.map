{"version":3,"sources":["webpack:///./src/views/Profile/index.vue?8f60","webpack:///src/views/Profile/index.vue","webpack:///./src/views/Profile/index.vue?9c7c","webpack:///./src/views/Profile/index.vue","webpack:///./src/components/ImageInput/index.vue?ac1f","webpack:///./src/helpers/AsyncFileReader.js","webpack:///src/components/ImageInput/index.vue","webpack:///./src/components/ImageInput/index.vue?a64c","webpack:///./src/components/ImageInput/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","on","submit","$event","preventDefault","onSubmit","attrs","img-style","maxWidth","maxHeight","src","user","image","change","setImage","type","name","domProps","value","email","phone","to","staticRenderFns","Profilevue_type_script_lang_js_","meta","title","$t","components","PasswordField","ImageInput","mixins","withUser","data","errors","ErrorBag","watch","confirming","show","$","modal","mounted","_this","$data","notifications","showUpdateErrorNotification","message","methods","Object","objectSpread","vuex_esm","verifyPassword","updateUser","_onSubmit","asyncToGenerator","regeneratorRuntime","mark","_callee","ev","formData","matches","result","wrap","_context","prev","next","FormData","target","sent","hasOwnProperty","abrupt","stop","_x","apply","arguments","views_Profilevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_t","id","generatePreview","directives","rawName","expression","style","imgSrc","alt","AsyncFileReader","classCallCheck","reader","FileReader","file","format","Promise","resolve","reject","methodName","onload","e","readAs","ImageInputvue_type_script_lang_js_","props","required","String","default","imgStyle","imageFile","imagePreview","computed","_generatePreview","files","AsyncFileReader_AsyncFileReader","readAsDataURL","$emit","t0","unknownError","components_ImageInputvue_type_script_lang_js_"],"mappings":"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","file":"js/profile.10cff4cc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',[_c('h1',[_vm._v(\"Perfil\")]),_c('div',{staticClass:\"card shadow mb-5\"},[_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('image-input',{attrs:{\"img-style\":{maxWidth: '200px', maxHeight: '200px'},\"src\":_vm.user.image},on:{\"change\":_vm.setImage}},[_vm._v(\"\\n                            Imagem\\n                        \")])],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Nome\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"name\"},domProps:{\"value\":_vm.user.name}})])]),_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Email\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"email\"},domProps:{\"value\":_vm.user.email}})])])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Telefone\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"phone\"},domProps:{\"value\":_vm.user.phone || ''}})])]),_c('div',{staticClass:\"col-12 col-md-6\"},[_c('password-field')],1)]),_c('div',{staticClass:\"text-right\"},[_c('router-link',{staticClass:\"btn btn-danger mr-1\",attrs:{\"to\":\"/\"}},[_vm._v(\"Cancelar\")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Salvar\")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\n  import withUser from '@/mixins/withUser'\n  import PasswordField from '@/components/UI/PasswordField'\n  import ErrorBag from \"../../helpers/ErrorBag\"\n  import {mapActions} from 'vuex'\n  import ImageInput from '@/components/ImageInput'\n\n  export default {\n    name: 'Profile',\n    meta: {\n      title: $t('pages.profile')\n    },\n    components: {\n      PasswordField,\n      ImageInput\n    },\n    mixins: [withUser],\n    data: () => ({errors: new ErrorBag(), image: null}),\n    watch: {\n      confirming(show) {\n        $('#updateConfirm').modal({show})\n      }\n    },\n    mounted() {\n      $('#updateConfirm').on('hidden.bs.modal', () => this.$data.confirming = false)\n      $('#updateConfirm').on('shown.bs.modal', () => this.$data.confirming = true)\n    },\n    notifications: {\n      showUpdateErrorNotification: {\n        type: 'error',\n        title: $t('notifications.title.error'),\n        message: $t('notifications.message.user.update.error')\n      }\n    },\n    methods: {\n      ...mapActions({\n        verifyPassword: 'auth/verifyPassword',\n        updateUser: 'auth/updateUser'\n      }),\n      async onSubmit(ev) {\n        ev.preventDefault()\n\n        const formData = new FormData(ev.target)\n\n        const matches = await this.verifyPassword()\n\n        if (matches) {\n          const result = await this.updateUser(formData)\n\n          if (result.hasOwnProperty('errors')) {\n            this.$data.errors = new ErrorBag(result.errors)\n          }\n        }\n\n        return false\n      },\n      setImage(image) {\n        this.$data.image = image\n      }\n    }\n  }\n</script>\n\n<template>\n    <page>\n        <h1>Perfil</h1>\n        <div class=\"card shadow mb-5\">\n            <div class=\"card-body\">\n                <form @submit.prevent=\"onSubmit\">\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <image-input\n                                    :img-style=\"{maxWidth: '200px', maxHeight: '200px'}\"\n                                    :src=\"user.image\"\n                                    @change=\"setImage\">\n                                Imagem\n                            </image-input>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Nome</label>\n                                <input type=\"text\"\n                                       name=\"name\"\n                                       :value=\"user.name\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Email</label>\n                                <input type=\"text\"\n                                       name=\"email\"\n                                       :value=\"user.email\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Telefone</label>\n                                <input type=\"text\"\n                                       name=\"phone\"\n                                       :value=\"user.phone || ''\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                        <div class=\"col-12 col-md-6\">\n                            <password-field/>\n                        </div>\n                    </div>\n                    <div class=\"text-right\">\n                        <router-link to=\"/\" class=\"btn btn-danger mr-1\">Cancelar</router-link>\n                        <button type=\"submit\" class=\"btn btn-primary\">Salvar</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </page>\n</template>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c9c65fea&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._t(\"default\")],2),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"file\",\"name\":_vm.name,\"id\":_vm.name},on:{\"change\":_vm.generatePreview}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.imgSrc),expression:\"imgSrc\"}],staticClass:\"m-2\"},[_c('img',{staticClass:\"img-response img-fluid img-thumbnail\",style:(_vm.imgStyle),attrs:{\"src\":_vm.imgSrc,\"alt\":(\"Preview \" + _vm.name)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class AsyncFileReader {\n  constructor() {\n    this.reader = new FileReader()\n  }\n\n  readAs(file, format) {\n    return new Promise((resolve, reject) => {\n      const methodName = `readAs${format}`\n\n      try {\n        this.reader.onload = ev => {\n          return resolve(ev.target.result)\n        }\n\n        this.reader[methodName](file)\n      } catch(e) {\n        return reject(e)\n      }\n    })\n  }\n\n  readAsDataURL(file) {\n    return this.readAs(file, 'DataURL')\n  }\n\n  readAsArrayBuffer(file) {\n    return this.readAs(file, 'ArrayBuffer')\n  }\n\n  readAsBinaryString(file) {\n    this.readAs(file, 'BinaryString')\n  }\n\n  readAsText(file) {\n    this.readAs('Text')\n  }\n}","<script>\n  import AsyncFileReader from \"../../helpers/AsyncFileReader\"\n\n  export default {\n    name: 'ImageInput',\n    props: {\n      src: {\n        required: true\n      },\n      name: {\n        type: String,\n        default: () => 'image'\n      },\n      imgStyle: {\n        type: [Object, String],\n        default: () => ({})\n      }\n    },\n    data: () => ({imageFile: null, imagePreview: null}),\n    computed: {\n      imgSrc() {\n        if (this.imagePreview) return this.imagePreview\n        return this.src\n      }\n    },\n    methods: {\n      async generatePreview(ev) {\n        try {\n          const file = ev.target.files[0]\n          const reader = new AsyncFileReader()\n          const result = await reader.readAsDataURL(file)\n\n          this.$data.imageFile = file\n          this.$data.imagePreview = result\n\n          this.$emit('change', file)\n        } catch(e) {\n          unknownError()\n        }\n      }\n    }\n  }\n</script>\n\n<template>\n    <div>\n        <div class=\"form-group\">\n            <label>\n                <slot/>\n            </label>\n            <input\n                    @change=\"generatePreview\"\n                    type=\"file\"\n                    :name=\"name\"\n                    :id=\"name\"\n                    class=\"form-control\">\n        </div>\n        <div v-show=\"imgSrc\" class=\"m-2\">\n            <img\n                    class=\"img-response img-fluid img-thumbnail\"\n                    :style=\"imgStyle\"\n                    :src=\"imgSrc\"\n                    :alt=\"`Preview ${name}`\">\n        </div>\n    </div>\n</template>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4c90e139&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports"],"sourceRoot":""}