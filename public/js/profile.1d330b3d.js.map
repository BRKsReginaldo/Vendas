{"version":3,"sources":["webpack:///./src/components/ImageInput/index.vue?1a00","webpack:///./src/helpers/AsyncFileReader.js","webpack:///src/components/ImageInput/index.vue","webpack:///./src/components/ImageInput/index.vue?a64c","webpack:///./src/components/ImageInput/index.vue","webpack:///./src/views/User/Profile/index.vue?ecd8","webpack:///src/views/User/Profile/index.vue","webpack:///./src/views/User/Profile/index.vue?8036","webpack:///./src/views/User/Profile/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_t","attrs","type","accept","name","id","on","change","generatePreview","directives","rawName","value","expression","style","src","imgSrc","alt","staticRenderFns","AsyncFileReader","Object","classCallCheck","reader","FileReader","file","format","_this","Promise","resolve","reject","methodName","onload","ev","target","result","e","readAs","ImageInputvue_type_script_lang_js_","props","required","String","default","imgStyle","data","imageFile","imagePreview","computed","methods","_generatePreview","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","files","AsyncFileReader_AsyncFileReader","readAsDataURL","sent","$data","$emit","t0","unknownError","stop","_x","apply","arguments","components_ImageInputvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_v","submit","$event","preventDefault","onSubmit","img-style","maxWidth","maxHeight","user","image","setImage","domProps","email","phone","to","Profilevue_type_script_lang_js_","meta","title","$t","components","PasswordField","ImageInput","mixins","withUser","errors","ErrorBag","watch","confirming","show","$","modal","mounted","notifications","showUpdateErrorNotification","message","objectSpread","vuex_esm","verifyPassword","updateUser","_onSubmit","formData","matches","FormData","hasOwnProperty","abrupt","User_Profilevue_type_script_lang_js_"],"mappings":"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","file":"js/profile.1d330b3d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._t(\"default\")],2),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"file\",\"accept\":\"image/*\",\"name\":_vm.name,\"id\":_vm.name},on:{\"change\":_vm.generatePreview}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.imgSrc),expression:\"imgSrc\"}],staticClass:\"m-2\"},[_c('img',{staticClass:\"img-response img-fluid img-thumbnail\",style:(_vm.imgStyle),attrs:{\"src\":_vm.imgSrc,\"alt\":(\"Preview \" + _vm.name)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class AsyncFileReader {\n  constructor() {\n    this.reader = new FileReader()\n  }\n\n  readAs(file, format) {\n    return new Promise((resolve, reject) => {\n      const methodName = `readAs${format}`\n\n      try {\n        this.reader.onload = ev => {\n          return resolve(ev.target.result)\n        }\n\n        this.reader[methodName](file)\n      } catch(e) {\n        return reject(e)\n      }\n    })\n  }\n\n  readAsDataURL(file) {\n    return this.readAs(file, 'DataURL')\n  }\n\n  readAsArrayBuffer(file) {\n    return this.readAs(file, 'ArrayBuffer')\n  }\n\n  readAsBinaryString(file) {\n    this.readAs(file, 'BinaryString')\n  }\n\n  readAsText(file) {\n    this.readAs('Text')\n  }\n}","<script>\n  import AsyncFileReader from \"../../helpers/AsyncFileReader\"\n\n  export default {\n    name: 'ImageInput',\n    props: {\n      src: {\n        required: true\n      },\n      name: {\n        type: String,\n        default: () => 'image'\n      },\n      imgStyle: {\n        type: [Object, String],\n        default: () => ({})\n      }\n    },\n    data: () => ({imageFile: null, imagePreview: null}),\n    computed: {\n      imgSrc() {\n        if (this.imagePreview) return this.imagePreview\n        return this.src\n      }\n    },\n    methods: {\n      async generatePreview(ev) {\n        try {\n          const file = ev.target.files[0]\n          const reader = new AsyncFileReader()\n          const result = await reader.readAsDataURL(file)\n\n          this.$data.imageFile = file\n          this.$data.imagePreview = result\n\n          this.$emit('change', file)\n        } catch(e) {\n          unknownError()\n        }\n      }\n    }\n  }\n</script>\n\n<template>\n    <div>\n        <div class=\"form-group\">\n            <label>\n                <slot/>\n            </label>\n            <input\n                    @change=\"generatePreview\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    :name=\"name\"\n                    :id=\"name\"\n                    class=\"form-control\">\n        </div>\n        <div v-show=\"imgSrc\" class=\"m-2\">\n            <img\n                    class=\"img-response img-fluid img-thumbnail\"\n                    :style=\"imgStyle\"\n                    :src=\"imgSrc\"\n                    :alt=\"`Preview ${name}`\">\n        </div>\n    </div>\n</template>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=54dd8e98&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',[_c('h1',[_vm._v(\"Perfil\")]),_c('div',{staticClass:\"card shadow mb-5\"},[_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('image-input',{attrs:{\"img-style\":{maxWidth: '200px', maxHeight: '200px'},\"src\":_vm.user.image},on:{\"change\":_vm.setImage}},[_vm._v(\"\\n                            Imagem\\n                        \")])],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Nome\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"name\"},domProps:{\"value\":_vm.user.name}})])]),_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Email\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"email\"},domProps:{\"value\":_vm.user.email}})])])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-md-6\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Telefone\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"name\":\"phone\"},domProps:{\"value\":_vm.user.phone || ''}})])]),_c('div',{staticClass:\"col-12 col-md-6\"},[_c('password-field')],1)]),_c('div',{staticClass:\"text-right\"},[_c('router-link',{staticClass:\"btn btn-danger mr-1\",attrs:{\"to\":\"/\"}},[_vm._v(\"Cancelar\")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Salvar\")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\n  import withUser from '@/mixins/withUser'\n  import PasswordField from '@/components/UI/PasswordField'\n  import ErrorBag from \"../../../helpers/ErrorBag\"\n  import {mapActions} from 'vuex'\n  import ImageInput from '@/components/ImageInput'\n\n  export default {\n    name: 'Profile',\n    meta: {\n      title: $t('pages.profile')\n    },\n    components: {\n      PasswordField,\n      ImageInput\n    },\n    mixins: [withUser],\n    data: () => ({errors: new ErrorBag(), image: null}),\n    watch: {\n      confirming(show) {\n        $('#updateConfirm').modal({show})\n      }\n    },\n    mounted() {\n      $('#updateConfirm').on('hidden.bs.modal', () => this.$data.confirming = false)\n      $('#updateConfirm').on('shown.bs.modal', () => this.$data.confirming = true)\n    },\n    notifications: {\n      showUpdateErrorNotification: {\n        type: 'error',\n        title: $t('notifications.title.error'),\n        message: $t('notifications.message.user.update.error')\n      }\n    },\n    methods: {\n      ...mapActions({\n        verifyPassword: 'auth/verifyPassword',\n        updateUser: 'auth/updateUser'\n      }),\n      async onSubmit(ev) {\n        ev.preventDefault()\n\n        const formData = new FormData(ev.target)\n\n        const matches = await this.verifyPassword()\n\n        if (matches) {\n          const result = await this.updateUser(formData)\n\n          if (result.hasOwnProperty('errors')) {\n            this.$data.errors = new ErrorBag(result.errors)\n          }\n        }\n\n        return false\n      },\n      setImage(image) {\n        this.$data.image = image\n      }\n    }\n  }\n</script>\n\n<template>\n    <page>\n        <h1>Perfil</h1>\n        <div class=\"card shadow mb-5\">\n            <div class=\"card-body\">\n                <form @submit.prevent=\"onSubmit\">\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <image-input\n                                    :img-style=\"{maxWidth: '200px', maxHeight: '200px'}\"\n                                    :src=\"user.image\"\n                                    @change=\"setImage\">\n                                Imagem\n                            </image-input>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Nome</label>\n                                <input type=\"text\"\n                                       name=\"name\"\n                                       :value=\"user.name\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Email</label>\n                                <input type=\"text\"\n                                       name=\"email\"\n                                       :value=\"user.email\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col-12 col-md-6\">\n                            <div class=\"form-group\">\n                                <label>Telefone</label>\n                                <input type=\"text\"\n                                       name=\"phone\"\n                                       :value=\"user.phone || ''\"\n                                       class=\"form-control\">\n                            </div>\n                        </div>\n                        <div class=\"col-12 col-md-6\">\n                            <password-field/>\n                        </div>\n                    </div>\n                    <div class=\"text-right\">\n                        <router-link to=\"/\" class=\"btn btn-danger mr-1\">Cancelar</router-link>\n                        <button type=\"submit\" class=\"btn btn-primary\">Salvar</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </page>\n</template>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3a848e8a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports"],"sourceRoot":""}